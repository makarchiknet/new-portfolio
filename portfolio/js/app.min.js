(()=>{"use strict";let e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};let t=!0,r=(e=500)=>{let r=document.querySelector("body");if(t){let o=document.querySelectorAll("._lp");setTimeout((()=>{for(let e=0;e<o.length;e++){o[e].style.paddingRight="0px"}r.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},o=(e=500)=>{let r=document.querySelector("body");if(t){let o=document.querySelectorAll("._lp");for(let e=0;e<o.length;e++){o[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}r.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};const n=document.querySelectorAll(".menu__link[data-goto]");document.querySelector(".menu__icon");function l(e){const r=e.target;console.log(r.dataset.goto);const o=r.dataset.goto;if(o&&document.querySelector(o)){const r=document.querySelector(o),n=document.querySelector("header").offsetHeight,l=r.getBoundingClientRect().top+pageYOffset-n-20;t&&(document.documentElement.classList.remove("lock"),document.documentElement.classList.remove("menu-open")),window.scrollTo({top:l,behavior:"smooth"}),e.preventDefault()}}n.length>0&&n.forEach((e=>{e.addEventListener("click",l)}));let a={getErrors(e){let t=0,r=e.querySelectorAll("*[data-required]");return r.length&&r.forEach((e=>{null!==e.offsetParent&&(t+=this.validateInput(e))})),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_error"),e.parentElement.classList.add("_error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.hasAttribute("data-error")&&e.getAttribute("data-error")&&e.parentElement.insertAdjacentHTML("beforeend",'<div class="form__error">'+e.getAttribute("data-error")+"</div>")},removeError(e){e.classList.remove("_error"),e.parentElement.classList.remove("_error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(e){let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const r=t[e];r.parentElement.classList.remove("_focus"),r.classList.remove("_focus"),r.value=r.dataset.placeholder}let r=e.querySelectorAll(".checkbox__input");if(r.length>0)for(let e=0;e<r.length;e++){r[e].checked=!1}let o=e.querySelectorAll("select");if(o.length>0)for(let e=0;e<o.length;e++){const t=o[e],r=t.getAttribute("data-default");t.value=r,select_item(t)}},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};!function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),e.any()&&document.documentElement.classList.add("touch"),window.addEventListener("load",(function(){setTimeout((function(){document.documentElement.classList.add("loaded")}),0)})),function(){let e=document.querySelector(".icon-menu");e&&e.addEventListener("click",(function(e){t&&(((e=500)=>{document.documentElement.classList.contains("lock")?r(e):o(e)})(),document.documentElement.classList.toggle("menu-open"))}))}(),function(e){const t=document.forms;if(t.length)for(const e of t)e.addEventListener("submit",r);async function r(t){const r=t.target;if(0===(e?a.getErrors(r):0)){const e=r.getAttribute("data-message");if(r.hasAttribute("data-ajax")){t.preventDefault();const o=r.getAttribute("action")?r.getAttribute("action").trim():"#",n=r.getAttribute("method")?r.getAttribute("method").trim():"GET",l=new FormData(r);r.classList.add("_sending");const i=await fetch(o,{method:n,body:l});if(i.ok){await i.json();r.classList.remove("_sending"),e&&popupItem.open(`#${e}`),a.formClean(r)}else alert("Ошибка"),r.classList.remove("_sending")}r.hasAttribute("data-test")&&(t.preventDefault(),e&&popupItem.open(`#${e}`),a.formClean(r))}else{const e=r.querySelector("._error");e&&r.hasAttribute("data-goto-error")&&gotoBlock(e,1e3,50),t.preventDefault()}}}(!0)})();